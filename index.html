<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="loginStyles.css" type="text/css" />
  </head>

  <body onload="getReadings()">
    <section class="slideshow" id="about-login">

      <div id="content" class="image aos-item" data-aos="fade-down" style="margin-top: 220px;">
        <form>
          <div style="display: flex; align-items: center;">
            <img style="width: 150px; margin-right: 50px; justify-self: flex-start" src="logo.png" />
            <h3 style="justify-self: flex-end">Machine Connectivity Unit</h3>
          </div>
          <br>
          
  
          <div id="sensors">
            <div class="sensor-status">
              <h2 style="margin: 20px;">CH1</h2>
              <div class="status" id="status1">
              </div>
            </div>
            <div class="sensor-status">
              <h2 style="margin: 20px;">CH2</h2>
              <div class="status" id="status2">
              </div>
            </div>
            <div class="sensor-status">
              <h2 style="margin: 20px;">CH3</h2>
              <div class="status" id="status3">
              </div>
            </div>
            <div class="sensor-status">
              <h2 style="margin: 20px;">CH4</h2>
              <div class="status" id="status4">
              </div>
            </div>
          </div>
          <div style="display: flex; justify-content: center;">
            <div class="sensor-status" style="width: 180px;">
              <h2 style="margin: 20px;">OUT</h2>
              <div class="status"  id="outStatus">
              </div>
            </div>
          </div>
        </form>
      </div>
      
    </section>


  </body>

    <script>
    function getReadings(){
          setInterval(async function() {
          await fetch('data.csv') 
          .then(response => response.text())
          .then(text => {
              var data = text.split(",");
              if (data[0] == "HIGH") {document.getElementById("status1").style.backgroundColor = "orange"} else {document.getElementById("status1").style.backgroundColor = "rgba(170, 170, 170, 0.425)"}
              if (data[1] == "HIGH") {document.getElementById("status2").style.backgroundColor = "orange"} else {document.getElementById("status2").style.backgroundColor = "rgba(170, 170, 170, 0.425)"}
              if (data[2] == "HIGH") {document.getElementById("status3").style.backgroundColor = "orange"} else {document.getElementById("status3").style.backgroundColor = "rgba(170, 170, 170, 0.425)"}
              if (data[3] == "HIGH") {document.getElementById("status4").style.backgroundColor = "orange"} else {document.getElementById("status4").style.backgroundColor = "rgba(170, 170, 170, 0.425)"}
              if (data[4] == "HIGH") {document.getElementById("outStatus").style.backgroundColor = "green"} else {document.getElementById("outStatus").style.backgroundColor = "rgba(170, 170, 170, 0.425)"}
          }, 100)
        }
      );
    }
    
    
  </script>
</html>



